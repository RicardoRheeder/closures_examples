<!DOCTYPE html>
<html>
<body>

<h2>JavaScript Function Closures</h2>

<p>Counting with a local variable.</p>

<button type = "button" onclick="myFunction()">Count!</button>

<p id="demo"></p>

<!-- 
    The following does not work, as the counter will be reset to 0 everytime.
    <script>
        // Initiate counter
        var counter = 0;

        // Function to increment counter
        function add() {
            var counter = 0; 
            counter += 1;
            return counter;
        }

        function myFunction(){
            document.getElementById("demo").innerHTML = "The inner counter is: " + add();
        }
    </script> -->

<!-- 
    The following could have solved the counter dilemma, if we could reach the plus() function outside of the scope.

    <script>
        document.getElementById("demo").innerHTML = add();
        function add() {
            var counter = 0;
            function plus() {counter += 1;}
            plus();  
            return counter; 
        }
    </script>
 -->

<pre>
    <ul>
        <li>Here, the variable add is assigned the return value of a SELF-INVOKING function.</li>
        <li>The SELF-INVOKING FUNCTION only runs once. - It sets the counter to zero, and returns a function expression.</li>
        <li>This way add becomes a function. The best pat is that it can access the counter in the parent scope.</li>
        <li>This is called CLOSURE. It makes it possible for a function to have 'private variables.</li>
        <li>The counter is protected by the scope of the anonymous function, and can only be changed using the add function.</li>
    </ul>
    var add = (function () {
        var counter = 0;
        return function () {counter += 1; return counter;}
    })();
    
    function myFunction(){
        document.getElementById("demo").innerHTML = add();
    }
    <br>
    <b><u>Definition:</u> A closure is a function having access to the parent scope, even after the parent function has closed.</b>
</pre>

</body>

<script>
    var add = (function () {
        var counter = 0;
        return function () {counter += 1; return counter;}
    })();
    
    function myFunction(){
        document.getElementById("demo").innerHTML = add();
    }
</script>

</html>